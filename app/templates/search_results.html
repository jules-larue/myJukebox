{% extends "resultats_base.html" %}
{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='resultats_cover.css') }}" /> <!-- Un CSS spécifique aux résultats avec des covers d'albums -->
{% endblock %}

{% block title %}Résultats de la recherche {{query}}{% endblock %}

{% block main %}


<h1>Résultats de la recherche <b>{{query}}</b></h1>

{% if resultats.pages==0 %} <!-- On indique qu'aucun résultat n'a été trouvé -->
<p class="bg-info">Aucun résultat trouvé</p>
{% endif %}


{% if resultats.pages>0 %}
{% block pagination_info %} {{ super() }} {% endblock %}
{% endif %}


{% if resultats.pages>0 %}
{% block div_row %}
{{super()}}
<div class="row">
  {% for resultat in resultats.items %}
  <div class="col-xl-3 col-md-4 col-sm-6 col-xs-12">
    <a href=" {{ url_for('album', id=resultat.id) }}">
      {% if resultat.imgURL == None %}
      <img src="{{ url_for('static', filename='non_disponible.gif') }}" />
      {% else %}
      <img src="{{ url_for('static', filename='images/'+album.imgURL) }}" />
      {% endif %}
      <h3>{{resultat.titre}}</h3>
    </a>
  </div>
  {% endfor %}
</div>
{% endblock %}<!-- Fin div_row -->
{% endif %}

{% if resultats.pages>0 %}
{% block pagination_info_bottom %} {{ super() }} {% endblock %}
{% endif %}


{% block pagination %}
<ul class="pagination">

<!-- Page précédente -->
{% if page>1 %}
<li>
      <a href="{{ url_for(nom_resultat,query=query, page=resultats.prev_num) }}" class="page-link" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
</li>
{% endif %}

<!-- Deux pages avant -->
{% if page>2 %}
<li><a class="page-link num-link" href="{{ url_for(nom_resultat, query=query, page=resultats.prev_num-1) }}">{{resultats.prev_num-1}}</a></li>
{% endif %}

<!-- Numéro précedent -->
{% if resultats.has_prev %}
<li><a class="page-link num-link" href="{{ url_for(nom_resultat, query=query, page=resultats.prev_num) }}">{{resultats.prev_num}}</a></li>
{% endif %}

<!-- Le numéro de page courante -->
<li><a class="page-link active" href="#">{{page}}</a></li>

<!-- Numéro suivant -->
{% if resultats.has_next %}
<li><a class="page-link num-link" href="{{ url_for(nom_resultat, query=query, page=resultats.next_num) }}">{{resultats.next_num}}</a></li>
{% endif %}

<!-- Deux pages après -->
{% if page<=resultats.pages-2 %}
<li><a class="page-link num-link" href="{{ url_for(nom_resultat, query=query, page=resultats.next_num+1) }}">{{resultats.next_num+1}}</a></li>
{% endif %}

<!-- Page suivante -->
{% if page<resultats.pages %}
<li>
      <a href="{{ url_for(nom_resultat, query=query, page=resultats.next_num) }}" class="page-link" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
</li>
{% endif %}
</ul> <!-- Fin de la pagination ul -->
{% endblock %}

{% endblock %} <!-- Fin bloc main -->


{% block js %}
curTab = "albums-tab"
{% endblock %}
